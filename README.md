django-base-project
===================
This is a base django project that comes with everything we need to get started on fun, innovative stuff.

## Features ##

By default, this project template includes:

Templating:
- django_compressor for compressing javascript/css/less/sass

Security:
- hashlib
- m2crypto

Background Tasks:
- Celery

Migrations:
- Django built-in migrations (Django >=1.7)

Caching:
- django-redis

Testing:
- pytest
- pytest-coverage

Authentication:
- python-social-auth for OAuth with social networks

Amazon:
- boto for integration with AWS

Any of these options can added, modified, or removed as you like after creating your project.

## Structure/Organization

This template follows the default folder structure recommended by Django:

```
django-base-project/
|---ansible/
|   |---plugins/
|   |---roles/
|   |   |---webserver/ <-- setup Nginx
|   |---site.yml
|   |---webserver.yml
|   |
|---django-base-project/ <-- remember to change the name!
|   |---.rcfile <-- config for your pylint needs.
|   |---docs/
|   |   |---_build <-- autogenerated by Makefile.
|   |   |---_static
|   |   |---_templates
|   |   |---conf.py <-- edit this file for default doc values.
|   |   |---Makefile
|   |---sample_app/ 
|   |   |---__init__.py
|   |  	|---models 
|   |  	|   |---sample_model.py <-- each model should be its own file.
|   |  	|---tests <-- all tests for sample_app should go here.
|   |  	|   |---test_sample_app.py
|   |   |---urls.py
|   |   |---views.py
|   |-- settings/
|	|	|---__init__.py
|	|	|---common.py <-- common settings shared by all environments.
|	|	|---local.py
|	|	|---dev.py
|	|	|---qa.py
|	|	|---staging.py
|	|	|---production.py
|	|---static_common/ <-- static assets shared by apps go here.
|	|	|---css/
|	|	|---images/
|	|	|---js/
|   |---manage.py
|   |---requirements.txt
|   |---user-data.json <- fixture to create your admin user.
|   |
|---static/ <-- this is autogenerated by collectstatic.
```

## Code Quality

### Pylint

This Django project comes with a pre-defined rcfile for linting purposes. Edit it to your liking. The project should already be free of any PEP8 warnings or errors.

## Installation

Python 3.4 is required. If you don't have Python 3.4 or higher, download the appropriate package and install:

```shell
wget https://www.python.org/ftp/python/3.4.3/python-3.4.3-macosx10.6.pkg
```

Then install virtualenv:

```shell
sudo pip3 install virtualenv
```

Create a virtualenv:

```shell
virtualenv -p <PYTHON_3_PATH> ~/virtualenvs/django-base-project
source ~/virtualenvs/django-base-project/bin/activate
~/virtualenvs/django-base-project/bin/pip3 install -r requirements.txt
```

# Deployment

## Local 
When running the project locally for the first time, you need to setup the database.

Activate your virtualenv:
```shell
source ~/virtualenvs/django-base-project/bin/activate
```

Setup the database. Locally, this will create a new sqllite database

```shell
cd django_base_project
python3 manage.py migrate
```

Load initial data. This will create a base admin user with `admin` as the username and `changeme` as the password.

```shell
cd django_base_project
python3 manage.py loaddata user-data.json
```

## Ansible
If you want to deploy this Django app onto an EC2 instance, you can use the provided ansible playbook to do so:

```shell
ansible-playbook -i ec2.py -l<ec2_hostname>
```

## AWS Elastic Beanstalk

This project is ready to deploy in Elastic Beanstalk. All you need is to set your AWS credentials like so:

```shell
export AWS_ACCESS_KEY_ID="<your_aws_access_key>"
export AWS_SECRET_KEY="<your_aws_secret_key>"
```

Next, initialize your project for Elastic Beanstalk:

```
eb init
```

Finally, deploy your code!

```
eb deploy
```

For more information on deploying a Django app into Elastic Beanstalk, you can visit AWS's documentation here: http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Python_django.html

# Testing

In the provided sample app `sample_app`, there's a tests directory that implements some sample test cases that show how different test classes can be leveraged by the Django application. 

To start the tests, simply run:
```shell
python3 manage.py test
```

You should see the following output:

```shell
python3 manage.py test
Creating test database for alias 'default'...
...
----------------------------------------------------------------------
Ran 3 tests in 3.049s

OK
Destroying test database for alias 'default'...
```

## Selenium Testing

This project also provides the `selenium` so you can quickly spin up your site (on a different port) and test it against various browsers.

```shell
python3 manage.py test django_base_project.sample_app.SampleSeleniumTests
```

## Code Coverage

